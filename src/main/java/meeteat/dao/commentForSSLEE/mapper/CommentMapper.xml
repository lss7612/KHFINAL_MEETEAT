<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="meeteat.dao.commentForSSLEE.face.CommentDao">

<insert id="insertComment" parameterType="meeteat.dto.commentForSSLEE.Comment">
	INSERT INTO tb_comment2 (
		comment_no, article_no, board_no
		,comment_content, user_no, comment_order
		,comment_originno,is_delete 
		,create_date, revision_date
		)
	VALUES(tb_comment2_seq.nextval, #{article_no}, #{board_no}
		,#{comment_content}, #{user_no}, #{comment_order}
		,#{comment_originno}, #{is_delete}
		,sysdate, #{revision_date,jdbcType=VARCHAR}
		)
</insert>

<select id="getCommentList" parameterType="hashmap" resultType="hashmap">
	SELECT 
	    c.*
	    ,(SELECT user_nick FROM tb_user2 u WHERE u.user_no = c.user_no) user_nick
	FROM tb_comment2 c
	WHERE article_no = #{article_no}
	    AND board_no = #{board_no}
	ORDER BY c.comment_no ASC
</select>

</mapper>